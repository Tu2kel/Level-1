const readline = require("readline-sync")

var player = require('play-sound')(opts = {})

player.play('Roadrunner.mp3', function(err){
  if (err) throw err
})
//  const audio = new Audio('Roadrunner.mp3');


//#region STORED USER with USERNAME + GREETING
const userName = readline.question("State your name = ");
console.log(userName + "!" + " You've Escaped the Escape Room, ONLY to Start the REAL🩸Game");
//#endregion


// #region INTRO
readline.question(
  "🤡 As a Software Engineer you should be familiar with Polya's Process." +
    ":" + " Press Enter" 
    
);

readline.question(
  "🤡 If you can't manage to Solve the Problem..." + ":" + " Press Enter"
  );
  
  readline.question(
    "🤡 Will You Escape with YOUR LIFE?" + ":" + " Press Enter"
    );
    
    readline.question(
      "🤡 What is the extent you will go through in order to Survive? " +
        ":" +
        " Press Enter"
    );

      readline.question(
        " Your Killers for this EVENING... Mark Hoffman: SAW 3, 4, 5, 6, and SAW 3D " + "Logan Nelson: Jigsaw " + " and the Pinnacle of SAW - John Kramer AKA JIGSAW! " + "..Dare to Press Enter: "
      );

            readline.question(
              "🤡 LIVE or DIE...Make Your Choice" + ":" + " Press Enter"
              
            );
              
//#endregion

//#region Values / Initializers

isEnemyAlive = true;
isAlive = true; // UNDER WHILE LOOP > SHOULD ALLOW PLAYER TO CONTINUE WITH CHOICES; IF FALSE GAME COMPLETES 
const moves = [1, 2, 3, 4, 5]; //✅
const weapons = [ " ShotGun Full of Ammo ", " Machete ", " Bruce_Lee_Video_Tapes ",];
const enemies = ["Logan_Nelson " , "Jigsaw, " , "Mark_Hoffman "];
// #endregion

// #region STATS
const inventory = [];

let playerHP = 50;

maxDamage = 60;
minDamage = 20;

let enemyHP = 50;

const items = ['PreCorp_Pillz PCP😉', 'ShotGun💥', 'Machete🔪'];

// #endregion

 
 //#region ENEMY ENCOUNTER  //✅
    function enemyAction(){ //✅

    fight = true
    const random = Math.floor(Math.random() * enemies.length)
    const enemy = enemies[random]
    const prize = items[Math.floor(Math.random() * items.length)];
    
    const enemyAP = Math.floor(Math.random() * (maxDamage - minDamage + 1)) + minDamage;
    const playerOneHittaQuitta = Math.floor(Math.random() * (maxDamage - minDamage + 1)) + minDamage;

    const superSaiyan = playerHP - enemyAP
    

    const thriller =  enemyHP - playerOneHittaQuitta
    

        

    while (fight == true){
      let decision = readline.keyIn( enemy + " 🐷 is after you" +
      " Press 'p' to print status:" + 
      " Press 'r' 🏃🏽💨🍃to run:" 
      + " Press 'a' 🥷🏽👊🏽 to Attack: " 
      + " Press 'q' to QUIT! ");
      
      
    
      if (decision === 'a'){
          console.log('You chose to Kick his ass');
          enemyHP -= playerOneHittaQuitta;
          

          console.log( userName + ' attacked  🐷 ' + enemy + ' with ' + playerOneHittaQuitta + ' Attack Points.');

          playerHP -= enemyAP;
          console.log( enemy + ' 🐷 attacked you with ' + enemyAP + ' Attack Points.');

          if (enemyHP <= 0) {
              console.log(userName + ' Killed this MF 🐷...for Now ' + '.\n' + enemy + ' left behind: ' + prize ); // needs to randomize loot
              console.log("You survived with " + superSaiyan + ' HP ' + playerOneHittaQuitta + ' AP and the ' + prize);
              fight = false;
                

              const items = Math.random();

                if (items <= 0.9) {
                    inventory.push(prize);
                    
                }
                  } else if (playerHP <= 49) {
                      console.log(enemy + " 🐷🔪 Killed Your Ass 🩸!GAME🤡OVER!🩸");
                      fight = false
                      isAlive = false;
                  }
         
                  
        
      } 
        else if (decision === 'p'){
          console.log('Print Inventory');
                  
                        console.log(userName + ' HP is now ' + superSaiyan);
                        '/n'  
                        console.log(enemy + ' HP is now ' + thriller);
                        '/n' 
                        console.log(inventory + ' Stored Inventory');
                        '/n' 
                        console.log(playerHP + 'playerHP');
        }

              else if (decision === 'r'){ 
                console.log(' 🏃🏽💨🍃');
                const escapePlan = 0.5;
                if (Math.random() < escapePlan ) {
                  console.log('You escaped this round ');
                  fight = false;
                  // isAlive = false;
                }
        
         
        }
        else if (decision === 'q') {
          console.log('🤡 There seems to be no QUITTING in this 🩸!GAME!🔪🩸');
        }

        
        else {
          console.log(` Escape? Lol, Don't Be ridiculous`);
          console.log(`You have ` + superSaiyan + ` HP left`);
            console.log(enemy + `has `+ thriller +  ` HP left`);

        } 

      }

      
          
    

      
    }


  

//#endregion




//#region WALK / RUN 

while (isAlive == true) { // ✅
    choice = readline.keyIn(
    userName + " Press 'w' 🚶🏽to walk:" + " Press 's' 🏃🏽💨🍃to Sprint:"  );
    
  
    if (choice === "w"  ) { // ✅
         let index = readline.keyInSelect(moves, " How many steps forward " + "= ");
         
         console.log(userName + " Nervously 😨 moved " + moves[index] + " step(s)" + " forward" ); 
         walks() // ✅ walks()
            
        }
  
        else if (choice === "s") { //✅
              console.log("Running 🏃🏽💨🍃 Scared ")
              // index = readline.keyInSelect(moves, " How many steps forward " + "= ");
              walks()
          }
   //#endregion    
   
   
          //        if (choice === "b") {//✅
                  
          //         tapes()
           
          // }
        
          //HIDDEN EXIT SIMULATION ONLY WHEN PROMPTED IN CHOICES area w r a 
                  else if (choice == "x" && isAlive == true ) { //✅
                    console.log("🚶🏽💨 Leaving the Game...🩸Too Frightened to Continue🩸");
                    isAlive = false;
          }
         
}
// #region WALKS OR RUNS INTO WEAPON BOX

function walks(){ //✅
    const random = Math.floor(Math.random() * 10) + 1;
      if(random <= 4){
          enemyAction()
          

      }
          else if (random <= 3 ) { //✅
            console.log( userName + " 😮 walks into a Box and finds a: " + weapons );
            
            const index = readline.keyInSelect(weapons, "Choose one:" );//Syntax , after not +
                if (index === 0) {
                  console.log(weapons[0]);
                    shotty();
                    inventory.push(weapons[0])

                  } 
                  else if (index === 1) {
                      
                      console.log(weapons[1]);
                      knife();
                      inventory.push(weapons[1])
                  }

                    else if (index === 2) {
                      console.log(weapons[2] + " but No🤦🏽VCR" + ' throws tapes, then runs back and grabs them');
                      // tapes()
                      inventory.push(weapons[2])
                      
                  }
                  

                  } 
                  
            
  }
  //#endregion


//#region SHOTTY AND KNIFE WORKS ONCE BOX IS FOUND THEN 'w' / 's'
  function shotty (){ //✅
            if (isAlive == true && choice == "w") {
                console.log(userName + ' chose the ' + "ShotGun " + 'and is walking while aiming down the hall ')
            }
            else if (isAlive == true && choice == "s") {
              console.log(userName + ' Hears a noise; Pulls The Trigger. 💥 🩸!GAME🐷OVER!🩸 ' + userName + " Didn't Check the barrel now " + userName + 's Face is blown All Over the Room🩸');
              isAlive = false;
            }
    }

    function knife() { //✅
      if (isAlive == true && choice == "w") {
        console.log(userName + ' has the ' + "Machete " +  'and moving frantically')
        
      }
      else if (isAlive == true && choice == "s") {
        console.log(userName + " Hears a sound and Sprints Off Running... 🩸!GAME🐷OVER!🩸 " + userName + " trips on TripWire and the Machete Pierces in thru the neck and out the back of the Skull ");
        isAlive = false
      }
                
    }
    
    // function tapes (){ //✅
    //         if (isAlive == true && choice == "b") {
    //         //  console.log(weapons[2] + "No🤦🏽VCR"); 
    //          console.log(userName + ' throws the VHS and runs')
    //         }
            
    // }

    
//#endregion



// #endregion
